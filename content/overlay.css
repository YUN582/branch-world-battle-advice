/* ============================================================
   Branch World Battle Roll - 임베디드 패널 스타일
   코코포리아 채팅 패널 내부에 삽입 · 코코포리아 컬러 통일
   주조색: #3b3d33  ·  보조색: #212121
   ============================================================ */

/* ── 패널 컨테이너 ───────────────────────────── */

#bwbr-panel {
  background: #2e3029;
  border-bottom: 1px solid rgba(255, 255, 255, 0.10);
  font-family: inherit;
  font-size: 14px;
  color: #e0e0e0;
  user-select: none;
  position: relative;
  z-index: 1;
}

/* ── 토글 바 (접기/펼치기) ────────────────────── */

#bwbr-toggle {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 14px;
  cursor: pointer;
  background: #212121;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  transition: background 0.2s;
}

#bwbr-toggle:hover {
  background: #2a2a2a;
}

.bwbr-toggle-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.bwbr-toggle-icon {
  font-size: 16px;
}

.bwbr-toggle-title {
  font-size: 13px;
  font-weight: 600;
  color: #ccc;
}

#bwbr-btn-expand {
  background: none;
  border: none;
  color: #888;
  cursor: pointer;
  font-size: 13px;
  padding: 4px 8px;
  border-radius: 4px;
  transition: all 0.2s;
}

#bwbr-btn-expand:hover {
  background: rgba(255, 255, 255, 0.08);
  color: #ccc;
}

/* ── 상태 점(dot) ─────────────────────────────── */

.bwbr-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #666;
  flex-shrink: 0;
}

.bwbr-dot.idle       { background: #777; }
.bwbr-dot.active     { background: #4caf50; animation: bwbr-pulse 1.5s infinite; }
.bwbr-dot.waiting    { background: #ff9800; animation: bwbr-pulse 1s infinite; }
.bwbr-dot.error      { background: #f44336; }
.bwbr-dot.disabled   { background: #555; }

@keyframes bwbr-pulse {
  0%, 100% { opacity: 1; }
  50%      { opacity: 0.3; }
}

.bwbr-status-text {
  font-size: 12px;
  color: #999;
}

/* ── 패널 본체 (접기/펼치기 대상) ─────────────── */

#bwbr-body {
  overflow: hidden;
  transition: max-height 0.25s ease, opacity 0.25s ease;
  max-height: 600px;
  opacity: 1;
}

#bwbr-body.bwbr-collapsed {
  max-height: 0;
  opacity: 0;
  pointer-events: none;
}

/* ── 전투 정보 ────────────────────────────────── */

#bwbr-combat-info {
  padding: 10px 14px;
}

.bwbr-no-combat {
  text-align: center;
  color: #888;
  font-size: 13px;
  padding: 8px 0;
}

.bwbr-round-badge {
  text-align: center;
  font-size: 14px;
  color: #e0e0e0;
  font-weight: 700;
  margin-bottom: 8px;
}

.bwbr-fighters {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
}

.bwbr-fighter {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  min-width: 80px;
}

.bwbr-fighter-icon {
  font-size: 20px;
}

.bwbr-fighter-name {
  font-size: 14px;
  font-weight: 600;
  color: #e0e0e0;
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.bwbr-fighter-dice {
  font-size: 26px;
  font-weight: 700;
  color: #fff;
  line-height: 1.2;
}

.bwbr-fighter-thresholds {
  font-size: 11px;
  color: #999;
}

.bwbr-vs {
  font-size: 14px;
  font-weight: 700;
  color: #888;
}

/* ── 빈 슬롯 (미지정 상태) ───────────────────── */

.bwbr-fighter-name.bwbr-empty {
  color: #666;
  font-style: italic;
}

/* ── 수동 입력 ────────────────────────────────── */

#bwbr-manual-input {
  padding: 10px 14px;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(255, 152, 0, 0.06);
}

.bwbr-manual-label {
  font-size: 13px;
  color: #ff9800;
  margin-bottom: 8px;
}

.bwbr-manual-row {
  display: flex;
  gap: 8px;
}

#bwbr-manual-value {
  flex: 1;
  background: #212121;
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 4px;
  color: #e0e0e0;
  font-size: 16px;
  padding: 8px 12px;
  outline: none;
  font-family: inherit;
  -moz-appearance: textfield;
  appearance: textfield;
}

#bwbr-manual-value::-webkit-inner-spin-button,
#bwbr-manual-value::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

#bwbr-manual-value:focus {
  border-color: #ff9800;
}

#bwbr-manual-value.bwbr-input-error {
  border-color: #f44336;
  animation: bwbr-shake 0.3s;
}

@keyframes bwbr-shake {
  0%, 100% { transform: translateX(0); }
  25%      { transform: translateX(-3px); }
  75%      { transform: translateX(3px); }
}

#bwbr-manual-submit {
  background: #ff9800;
  border: none;
  border-radius: 4px;
  color: #fff;
  font-size: 14px;
  font-weight: 600;
  padding: 8px 18px;
  cursor: pointer;
  transition: background 0.2s;
  font-family: inherit;
}

#bwbr-manual-submit:hover {
  background: #f57c00;
}

/* ── 액션 (전투 중지) ─────────────────────────── */

#bwbr-actions {
  padding: 8px 14px;
  text-align: right;
}

#bwbr-btn-cancel {
  background: none;
  border: 1px solid rgba(244, 67, 54, 0.3);
  border-radius: 4px;
  color: #e57373;
  font-size: 13px;
  padding: 6px 14px;
  cursor: pointer;
  transition: all 0.2s;
  font-family: inherit;
}

#bwbr-btn-cancel:hover {
  background: rgba(244, 67, 54, 0.10);
  border-color: #f44336;
}

/* ── 로그 ─────────────────────────────────────── */

#bwbr-log {
  max-height: 120px;
  overflow-y: auto;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
}

#bwbr-log:empty {
  display: none;
}

#bwbr-log::-webkit-scrollbar {
  width: 4px;
}

#bwbr-log::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.15);
  border-radius: 2px;
}

.bwbr-log-entry {
  padding: 4px 14px;
  font-size: 12px;
  color: #999;
  line-height: 1.5;
  word-break: break-all;
}

.bwbr-log-entry.bwbr-log-info    { color: #b0bec5; }
.bwbr-log-entry.bwbr-log-success { color: #81c784; }
.bwbr-log-entry.bwbr-log-warning { color: #ffb74d; }
.bwbr-log-entry.bwbr-log-error   { color: #ef5350; }
.bwbr-log-entry.bwbr-log-crit    { color: #ffd54f; font-weight: 600; }
.bwbr-log-entry.bwbr-log-fumble  { color: #ff8a80; font-weight: 600; }
